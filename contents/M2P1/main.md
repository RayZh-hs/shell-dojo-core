到目前为止, 你已经学会了使用 shell. 现在, 是时候让它成为真正**属于你的**了. 

程序员都喜欢**可定制化**的东西, 就像你可能会花**几个小时**来选择 VS Code 的颜色主题和图标, ~~或者用 Wallpaper Engine 寻找完美的壁纸~~. shell 也不例外. 

你有没有见过开发者那炫酷多彩的终端? 或者你是否好奇过他们是如何输入两个字母的命令就能神奇地运行一长串命令的? 这不是魔法, 你也可以做到！

---

在这个挑战中, 你将学会：

- 如何创建节省时间的快捷方式, 它叫做**别名（aliases）**

- 理解你的 shell 如何使用**环境变量**来"记住"设置

- 最重要的是, 将你的终端转变为一个**个性化**的工作空间. 

---

## 什么是 Shell? 

你正在交互的程序叫做 shell. 它是一个命令行解释器, 将你的命令转换为操作系统可以执行的操作. 有许多不同的 shell, 每个都有自己的特色. 

你最常遇到的有：

- **bash**：经典的 shell, 也是大多数 Linux 系统的默认 shell. 

- **zsh**：现代化、高度可扩展的 shell. 现在是 macOS 的默认 shell. 

- **fish**：专注于从一开始就用户友好的 shell. 它具有语法高亮和"自动建议"等功能, 无需配置. 

要找出你正在使用哪个 shell, 运行以下命令. 它读取一个特殊变量, 该变量存储了你的 shell 程序路径. 

```bash
echo $SHELL
```

你可能会疑惑什么是 echo, 什么是 $SHELL? 别担心, 我们很快就会讲到 `$SHELL` 部分. 现在只需要知道 `echo` 是一个在终端打印文本的命令. 

---

## Shell 的记忆

在我们进入`定制化`部分之前, 我们**需要**理解 shell 是如何在每次你打开新终端时记住你的设置. 并且, 在哪里可以找到这些设置. 

它从位于你的主目录（~/）中的一个特殊脚本读取. 对于 bash, 这个文件是 `~/.bashrc`. 对于 zsh, 这个文件是 `~/.zshrc`. 

这些只是纯文本文件, 每次启动新的 shell 会话时都会运行. 你可以用任何文本编辑器编辑它们来添加你自己的选项. 

> Recap：以点（.）开头的文件是隐藏的. 要查看它们, 你必须在 ls 命令中使用 `-a`（all）标志：`ls -a ~`

---

你通常会在 `.bashrc` 或 `.zshrc` 文件中看到大约 100 行代码. 不要被文件大小吓到. 其中大部分是注释（以 `#` 开头的行）, 解释每个部分的作用. 

在这个课程中, 我们将重点关注这两个主要概念：

- **别名（Aliases）**：这是你的个人快捷方式. 

- **环境变量**：这是你的 shell 的记忆. 

---

## 别名（Aliases）

别名是你给较长命令起的**快捷方式**或**昵称**. 语法是 `alias name="command"`. 

这里有一些极其有用的例子：

```bash
alias ll="ls -laH"
alias ..="cd .."
```

要创建别名, 你只需在 shell 中输入它. 但是, 它**只在当前会话中存在**. 请你务必记住：要让某个设置永久生效, 你必须将命令**添加到你的 shell 配置文件**（~/.bashrc 或 ~/.zshrc）中. 只需用文本编辑器打开它, 在底部添加你的别名. 

编辑配置文件后, 你需要告诉 shell 重新读取它. 你可以通过关闭并重新打开终端, 或者使用 source 命令来做到这一点：

```bash
# 对于 bash 用户
source ~/.bashrc

# 对于 zsh 用户
source ~/.zshrc
```
---

## 环境变量

环境变量是一个命名的值, 可以影响运行进程的行为方式. 把它们想象成程序可以读取以获取信息的系统级设置. 按照惯例, 它们的名称都是大写的. 

这里有一些最重要的：

- `$SHELL`：你当前 shell 程序的路径. 

- `$HOME`：你主目录的绝对路径. 

- `$USER`：你当前的用户名. 

- `$PATH`：一个用 ':' 分隔的目录列表, shell 在这些目录中**查找**可执行程序. 例如, 如果你的 PATH 中有 `/usr/local/bin`, 当你在终端中输入 `python` 时, shell 会在 `/usr/local/bin` 中查找名为 `python` 的可执行文件. 

> btw, Windows 也有环境变量, 你是否设置过 %PATH% 变量（在系统属性 -> 环境变量中编辑的那个）? 

---

要查看所有环境变量, 使用 `env` 命令. 

```bash
env
```

要查看特定变量的值, 在变量名前加上美元符号 `$` 使用 `echo`. `$` 告诉 shell "给我这个变量的值". 

```bash
# 查看 HOME 变量
echo $HOME

# 查看你的用户名
echo $USER
```

现在你可以理解为什么之前 `echo $SHELL` 是什么了. 

---

你可以使用 export 命令创建自己的变量. 这使得变量对你从该 shell 运行的任何其他程序都可用. 

```bash
export GREETING="Hello, World!"

echo $GREETING
```

就像Alias一样, 如果你希望你的变量是永久的, 你必须将 export 行添加到你的 ~/.bashrc 或 ~/.zshrc 文件中. 

当然, 你也可以不加 `export`, 那么有什么区别呢? `export` 告诉 shell 这个变量对从该 shell 启动的任何子进程都是可用的. 如果你不使用 `export`, 变量只在当前 shell 会话中可用. 

---

## 定制化

好的, 让我们回到最激动人心的部分：**定制化**！

shell 可以通过许多方式定制, 从改变颜色到添加功能. 对我来说, 如果你想复制一个炫酷终端的外观, 最简单的方法是使用像 **Oh My Zsh**（当然, 你需要先安装zsh, 我们简称为 `omz`）这样的框架, 或者使用开箱即用就可定制的 **fish**. 

有很多很棒的 `omz` 主题和插件可供选择. 你可以在 [Oh My Zsh Themes](https://github.com/ohmyzsh/ohmyzsh/wiki/Themes) 页面找到它们. 

我个人也在使用 `omz` 配合 `powerlevel10k` 主题. 对于插件, 我使用 `zsh-autosuggestions` 和 `zsh-syntax-highlighting`, 以及 `git` 和 `copyfile` 插件. 

去 Google 一下, 自己设置一下吧！这能让你每次打开终端时都感到兴奋. 

---

那么定制化是如何工作的? 这是魔法吗? 完全不是！这完全建立在你刚学到的东西之上：你的 `.zshrc` 文件和环境变量. 

当你安装像 Oh My Zsh 这样的框架时, 它本质上接管了你的 `~/.zshrc` 文件. 它用一个新的文件替换它, 这个新文件充当所有功能的控制面板. 让我们看看使用 Oh My Zsh 时你的 `~/.zshrc` 文件是什么样的（删减过）：

```bash
export ZSH="/Users/your_username/.oh-my-zsh"
ZSH_THEME="powerlevel10k/powerlevel10k"
plugins=(git copyfile)
source $ZSH/oh-my-zsh.sh
```

现在你都可以理解它们了！`export` 命令设置环境变量, 告诉 shell 这个 omz 在哪里. `ZSH_THEME` 变量指定要使用的主题, `plugins` 数组列出要加载的插件. 最后, `source` 命令运行主要的 Oh My Zsh 脚本, 它读取所有这些设置并应用它们. 